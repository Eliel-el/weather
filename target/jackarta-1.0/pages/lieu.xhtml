<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>Gestion des lieux</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        body {
            background: linear-gradient(120deg, #fff5f5, #ffe5e5);
            font-family: 'Segoe UI', sans-serif;
        }

        .card {
            border-radius: 20px;
            border: 2px solid #d32f2f;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
            background-color: #ffffff;
            padding: 30px;
            margin-bottom: 20px;
        }

        h3 {
            color: #d32f2f;
            font-weight: 700;
            margin-bottom: 25px;
        }

        label {
            font-weight: 600;
            color: #b71c1c;
        }

        .btn-red {
            background-color: #d32f2f;
            color: #fff;
            border-radius: 8px;
            padding: 10px 0;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-red:hover {
            background-color: #b71c1c;
        }

        .btn-secondary {
            background-color: #fff;
            color: #d32f2f;
            border: 2px solid #d32f2f;
            border-radius: 8px;
            padding: 10px 0;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background-color: #d32f2f;
            color: #fff;
        }

        .form-control:focus {
            border-color: #d32f2f;
            box-shadow: 0 0 5px rgba(211, 47, 47, 0.5);
        }

        .required-msg {
            color: #b71c1c;
            font-size: 0.9em;
        }

        table th,
        table td {
            vertical-align: middle !important;
        }
    </style>
</h:head>

<h:body>
    <div class="container mt-4">
        <div class="row">

            <!-- Formulaire -->
            <div class="col-lg-4">
                <div class="card">
                    <h3 class="text-center">Ajouter / Modifier un lieu</h3>

                    <h:form id="lieuForm">
                        <div class="mb-3">
                            <label for="nom">Nom :</label>
                            <h:inputText id="nom" value="#{lieuBean.nom}" styleClass="form-control" required="true" />
                            <h:message for="nom" styleClass="required-msg" />
                        </div>

                        <div class="mb-3">
                            <label for="description">Description :</label>
                            <h:inputTextarea id="description" value="#{lieuBean.description}" styleClass="form-control"
                                rows="3" required="true" />
                            <h:message for="description" styleClass="required-msg" />
                        </div>

                        <div class="mb-3">
                            <label for="latitude">Latitude :</label>
                            <h:inputText id="latitude" value="#{lieuBean.latitude}" styleClass="form-control"
                                required="true" />
                            <h:message for="latitude" styleClass="required-msg" />
                        </div>

                        <div class="mb-3">
                            <label for="longitude">Longitude :</label>
                            <h:inputText id="longitude" value="#{lieuBean.longitude}" styleClass="form-control"
                                required="true" />
                            <h:message for="longitude" styleClass="required-msg" />
                        </div>

                        <h:commandButton value="Enregistrer" action="#{lieuBean.enregistrerLieu}"
                            styleClass="btn-red w-100 mb-2" />
                    </h:form>
                </div>
            </div>

            <!-- Tableau -->
            <div class="col-lg-8">
                <div class="card">
                    <h3 class="text-center">Liste des lieux</h3>
                    <h:form id="tableForm">
                        <table class="table table-bordered table-hover">
                            <thead class="table-danger text-center">
                                <tr>
                                    <th>Nom</th>
                                    <th>Description</th>
                                    <th>Latitude</th>
                                    <th>Longitude</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <ui:repeat value="#{lieuBean.lieux}" var="lieu">
                                    <tr>
                                        <td>#{lieu.nom}</td>
                                        <td>#{lieu.description}</td>
                                        <td>#{lieu.latitude}</td>
                                        <td>#{lieu.longitude}</td>
                                        <td class="text-center">
                                            <h:commandButton value="Modifier"
                                                action="#{lieuBean.preparerModification(lieu)}"
                                                styleClass="btn btn-warning btn-sm mb-1" />
                                            <h:commandButton value="Supprimer"
                                                action="#{lieuBean.supprimerLieu(lieu.id)}"
                                                styleClass="btn btn-danger btn-sm"
                                                onclick="return confirm('Voulez-vous supprimer ce lieu ?');" />
                                        </td>
                                    </tr>
                                </ui:repeat>
                            </tbody>
                        </table>
                    </h:form>
                </div>
            </div>

        </div>
    </div>
</h:body>

</html>